(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[897],{243:(e,r,t)=>{"use strict";t.d(r,{E:()=>s});var a=t(5155),o=t(4269);function s(e){let{className:r,...t}=e;return(0,a.jsx)("div",{className:(0,o.cn)("animate-pulse rounded-md bg-muted",r),...t})}},854:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});var a=t(2115),o=t(4901);let s=()=>{let e=(0,a.useContext)(o.c);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},3391:(e,r,t)=>{"use strict";t.d(r,{A:()=>d});var a=t(5155),o=t(5239),s=t(2619),i=t.n(s),l=t(6948);let n=JSON.parse('{"o":[{"id":"hero-background","description":"A cozy, modern library with warm lighting.","imageUrl":"https://images.unsplash.com/photo-1485322551133-3a4c27a9d925?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NDE5ODJ8MHwxfHNlYXJjaHwxMHx8bGlicmFyeSUyMGJvb2tzfGVufDB8fHx8MTc2NTQzMDIwNHww&ixlib=rb-4.1.0&q=80&w=1080","imageHint":"library books"},{"id":"book-1","description":"Dune Cover","imageUrl":"https://images.unsplash.com/photo-1595124028480-cdfd7be7b85d?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NDE5ODJ8MHwxfHNlYXJjaHwxfHxkZXNlcnQlMjBwbGFuZXR8ZW58MHx8fHwxNzY1NDcwODUyfDA&ixlib=rb-4.1.0&q=80&w=1080","imageHint":"desert planet"},{"id":"book-2","description":"Project Hail Mary Cover","imageUrl":"https://images.unsplash.com/photo-1688413399498-e35ed74b554f?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NDE5ODJ8MHwxfHNlYXJjaHw5fHxzcGFjZXNoaXAlMjBpbnRlcmlvcnxlbnwwfHx8fDE3NjU0NzA4NTJ8MA&ixlib=rb-4.1.0&q=80&w=1080","imageHint":"spaceship interior"},{"id":"book-3","description":"The Three-Body Problem Cover","imageUrl":"https://images.unsplash.com/photo-1567587411727-154d1253a0c3?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NDE5ODJ8MHwxfHNlYXJjaHwyfHxhYnN0cmFjdCUyMHNjaS1maXxlbnwwfHx8fDE3NjU0NzA4NTJ8MA&ixlib=rb-4.1.0&q=80&w=1080","imageHint":"abstract sci-fi"},{"id":"book-4","description":"The Martian Cover","imageUrl":"https://images.unsplash.com/photo-1614935981447-893ce3858657?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NDE5ODJ8MHwxfHNlYXJjaHwxfHxtYXJzJTIwbGFuZHNjYXBlfGVufDB8fHx8MTc2NTM0Mzg0N3ww&ixlib=rb-4.1.0&q=80&w=1080","imageHint":"mars landscape"},{"id":"book-5","description":"Klara and the Sun Cover","imageUrl":"https://images.unsplash.com/photo-1705891333891-c225454768a7?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NDE5ODJ8MHwxfHNlYXJjaHw3fHxzdW4lMjBzZXR0aW5nfGVufDB8fHx8MTc2NTQ3MDg1Mnww&ixlib=rb-4.1.0&q=80&w=1080","imageHint":"sun setting"},{"id":"book-6","description":"Exhalation Cover","imageUrl":"https://images.unsplash.com/photo-1751971309844-cd398ffc540f?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NDE5ODJ8MHwxfHNlYXJjaHwxMHx8Y2xvY2t3b3JrJTIwbWFjaGluZXJ5fGVufDB8fHx8MTc2NTQ3MDg1Mnww&ixlib=rb-4.1.0&q=80&w=1080","imageHint":"clockwork machinery"},{"id":"book-7","description":"Ancillary Justice Cover","imageUrl":"https://images.unsplash.com/photo-1675326570919-946d728e9a25?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NDE5ODJ8MHwxfHNlYXJjaHwyfHxmdXR1cmlzdGljJTIwY2l0eXxlbnwwfHx8fDE3NjU0MzM2MzJ8MA&ixlib=rb-4.1.0&q=80&w=1080","imageHint":"futuristic city"},{"id":"book-8","description":"Gideon the Ninth Cover","imageUrl":"https://images.unsplash.com/photo-1594399430386-913fd5defaa4?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NDE5ODJ8MHwxfHNlYXJjaHw3fHxza3VsbCUyMHN3b3JkfGVufDB8fHx8MTc2NTQ3MDg1Mnww&ixlib=rb-4.1.0&q=80&w=1080","imageHint":"skull sword"},{"id":"book-9","description":"A Memory Called Empire Cover","imageUrl":"https://images.unsplash.com/photo-1564493140194-f9544fae5611?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NDE5ODJ8MHwxfHNlYXJjaHw3fHxzcGFjZSUyMHN0YXRpb258ZW58MHx8fHwxNzY1MzkxMzIyfDA&ixlib=rb-4.1.0&q=80&w=1080","imageHint":"space station"},{"id":"book-10","description":"Hyperion Cover","imageUrl":"https://images.unsplash.com/photo-1641146243141-951ae1e8913f?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NDE5ODJ8MHwxfHNlYXJjaHw1fHxjcnlzdGFsJTIwc3RydWN0dXJlfGVufDB8fHx8MTc2NTQ0MzEzMHww&ixlib=rb-4.1.0&q=80&w=1080","imageHint":"crystal structure"},{"id":"book-11","description":"The Left Hand of Darkness Cover","imageUrl":"https://images.unsplash.com/photo-1712511630932-c75d5f66d9b3?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NDE5ODJ8MHwxfHNlYXJjaHwzfHxpY2UlMjBwbGFuZXR8ZW58MHx8fHwxNzY1NDcwODUyfDA&ixlib=rb-4.1.0&q=80&w=1080","imageHint":"ice planet"},{"id":"book-12","description":"Children of Time Cover","imageUrl":"https://images.unsplash.com/photo-1446582186851-3fe172f6acb9?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NDE5ODJ8MHwxfHNlYXJjaHw4fHxzcGlkZXIlMjB3ZWJ8ZW58MHx8fHwxNzY1NDQyODYwfDA&ixlib=rb-4.1.0&q=80&w=1080","imageHint":"spider web"}]}').o;function d(e){let{book:r}=e,t=n.find(e=>e.id===r.coverImageId),s=r.coverUrl||(null==t?void 0:t.imageUrl);return(0,a.jsx)(i(),{href:"/book/".concat(r.id),className:"group",children:(0,a.jsx)(l.Zp,{className:"overflow-hidden h-full transition-all duration-200 ease-in-out group-hover:scale-105 group-hover:shadow-lg group-hover:shadow-primary/20 border-transparent hover:border-primary/50",children:(0,a.jsxs)(l.Wu,{className:"p-0",children:[(0,a.jsx)("div",{className:"aspect-[2/3] relative",children:s&&(0,a.jsx)(o.default,{src:s,alt:"Cover of ".concat(r.title),fill:!0,className:"object-cover",sizes:"(max-width: 640px) 50vw, (max-width: 768px) 33vw, (max-width: 1024px) 25vw, 20vw","data-ai-hint":null==t?void 0:t.imageHint})}),(0,a.jsxs)("div",{className:"p-2",children:[(0,a.jsx)("h3",{className:"font-semibold text-sm truncate group-hover:text-primary",children:r.title}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground truncate",children:r.author})]})]})})})}},3932:(e,r,t)=>{Promise.resolve().then(t.bind(t,7126))},3998:(e,r,t)=>{"use strict";t.d(r,{$:()=>d});var a=t(5155),o=t(2115),s=t(7129),i=t(3101),l=t(4269);let n=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=o.forwardRef((e,r)=>{let{className:t,variant:o,size:i,asChild:d=!1,...c}=e,m=d?s.DX:"button";return(0,a.jsx)(m,{className:(0,l.cn)(n({variant:o,size:i,className:t})),ref:r,...c})});d.displayName="Button"},4269:(e,r,t)=>{"use strict";t.d(r,{cn:()=>s});var a=t(2821),o=t(5889);function s(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,o.QP)((0,a.$)(r))}},4901:(e,r,t)=>{"use strict";t.d(r,{AuthProvider:()=>n,c:()=>l});var a=t(5155),o=t(2115),s=t(63),i=t(5183);let l=(0,o.createContext)(void 0);function n(e){let{children:r}=e,[t,n]=(0,o.useState)(null),[d,c]=(0,o.useState)(!0),m=(0,s.useRouter)();(0,o.useEffect)(()=>{(async()=>{let e=localStorage.getItem("token");if(!e){let r=document.cookie.match(RegExp("(^| )auth_token=([^;]+)"));r&&(e=r[2],localStorage.setItem("token",e))}if(console.log("[AuthProvider] Loading user from token. Token exists:",!!e),e)try{let e=await (0,i.rQ)();console.log("[AuthProvider] User loaded successfully:",e),n(e)}catch(e){console.error("[AuthProvider] Failed to load user",e),localStorage.removeItem("token"),document.cookie="auth_token=; path=/; max-age=0"}else console.log("[AuthProvider] No token found");c(!1)})()},[]);let u=async(e,r)=>{c(!0);try{let{token:t}=await (0,i.Lx)(e,r);localStorage.setItem("token",t),document.cookie="auth_token=".concat(t,"; path=/; max-age=").concat(604800,"; SameSite=Lax");let a=await (0,i.rQ)();n(a)}finally{c(!1)}},f=async(e,r,t,a)=>{c(!0);try{await (0,i.DY)(e,r,t,a)}finally{c(!1)}};return(0,a.jsx)(l.Provider,{value:{user:t,isAuthenticated:!!t,isLoading:d,login:u,register:f,logout:()=>{localStorage.removeItem("token"),document.cookie="auth_token=; path=/; max-age=0",n(null),m.push("/login")}},children:r})}},5183:(e,r,t)=>{"use strict";t.d(r,{DY:()=>i,FH:()=>a,Lx:()=>o,rQ:()=>s});let a=t(5125).A.create({baseURL:"/api/v1"});a.interceptors.request.use(e=>{let r=localStorage.getItem("token");if(!r&&"undefined"!=typeof document){let e=document.cookie.match(RegExp("(^| )auth_token=([^;]+)"));e&&(r=e[2])}return r&&(e.headers.Authorization="Bearer ".concat(r)),e});let o=async(e,r)=>{try{console.log("[API] Attempting login for:",e);let t=await a.post("/auth/login",{email:e,senha:r});return console.log("[API] Login response status:",t.status),console.log("[API] Login response data:",t.data),t.data}catch(e){var t,o,s,i,l;throw console.error("[API] Login Error Details:",{message:e.message,response:null==(t=e.response)?void 0:t.data,status:null==(o=e.response)?void 0:o.status,headers:null==(s=e.response)?void 0:s.headers}),Error((null==(l=e.response)||null==(i=l.data)?void 0:i.message)||"Invalid email or password")}},s=async()=>{try{let e=(await a.get("/usuarios/me/profile")).data;return{id:e.id,name:e.nome,username:e.email.split("@")[0],email:e.email,avatarUrl:e.fotoUrl||"https://placehold.co/100x100?text=User"}}catch(a){var e,r,t;throw console.error("[API] Fetch Profile Error:",{status:null==(e=a.response)?void 0:e.status,data:null==(r=a.response)?void 0:r.data,headers:null==(t=a.response)?void 0:t.headers,message:a.message}),Error("Failed to fetch user profile")}},i=async(e,r,t,o)=>{try{return(await a.post("/auth/register",{name:e,username:r,email:t,password:o})).data}catch(e){var s,i;throw Error((null==(i=e.response)||null==(s=i.data)?void 0:s.message)||"Registration failed")}}},5897:(e,r,t)=>{"use strict";t.d(r,{Avatar:()=>l,AvatarFallback:()=>d,AvatarImage:()=>n});var a=t(5155),o=t(2115),s=t(7870),i=t(4269);let l=o.forwardRef((e,r)=>{let{className:t,...o}=e;return(0,a.jsx)(s.bL,{ref:r,className:(0,i.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...o})});l.displayName=s.bL.displayName;let n=o.forwardRef((e,r)=>{let{className:t,...o}=e;return(0,a.jsx)(s._V,{ref:r,className:(0,i.cn)("aspect-square h-full w-full",t),...o})});n.displayName=s._V.displayName;let d=o.forwardRef((e,r)=>{let{className:t,...o}=e;return(0,a.jsx)(s.H4,{ref:r,className:(0,i.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...o})});d.displayName=s.H4.displayName},6259:(e,r,t)=>{"use strict";t.d(r,{Separator:()=>l});var a=t(5155),o=t(2115),s=t(7268),i=t(4269);let l=o.forwardRef((e,r)=>{let{className:t,orientation:o="horizontal",decorative:l=!0,...n}=e;return(0,a.jsx)(s.b,{ref:r,decorative:l,orientation:o,className:(0,i.cn)("shrink-0 bg-border","horizontal"===o?"h-[1px] w-full":"h-full w-[1px]",t),...n})});l.displayName=s.b.displayName},6948:(e,r,t)=>{"use strict";t.d(r,{BT:()=>d,Wu:()=>c,ZB:()=>n,Zp:()=>i,aR:()=>l});var a=t(5155),o=t(2115),s=t(4269);let i=o.forwardRef((e,r)=>{let{className:t,...o}=e;return(0,a.jsx)("div",{ref:r,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground",t),...o})});i.displayName="Card";let l=o.forwardRef((e,r)=>{let{className:t,...o}=e;return(0,a.jsx)("div",{ref:r,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",t),...o})});l.displayName="CardHeader";let n=o.forwardRef((e,r)=>{let{className:t,...o}=e;return(0,a.jsx)("h3",{ref:r,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",t),...o})});n.displayName="CardTitle";let d=o.forwardRef((e,r)=>{let{className:t,...o}=e;return(0,a.jsx)("p",{ref:r,className:(0,s.cn)("text-sm text-muted-foreground",t),...o})});d.displayName="CardDescription";let c=o.forwardRef((e,r)=>{let{className:t,...o}=e;return(0,a.jsx)("div",{ref:r,className:(0,s.cn)("p-6 pt-0",t),...o})});c.displayName="CardContent",o.forwardRef((e,r)=>{let{className:t,...o}=e;return(0,a.jsx)("div",{ref:r,className:(0,s.cn)("flex items-center p-6 pt-0",t),...o})}).displayName="CardFooter"},7126:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>x});var a=t(5155),o=t(854),s=t(63),i=t(2115),l=t(5897),n=t(3998),d=t(6948),c=t(6259),m=t(3391);let u=[{id:"1",title:"Dune",author:"Frank Herbert",coverImageId:"book-1"},{id:"2",title:"Project Hail Mary",author:"Andy Weir",coverImageId:"book-2"},{id:"3",title:"The Three-Body Problem",author:"Cixin Liu",coverImageId:"book-3"},{id:"4",title:"The Martian",author:"Andy Weir",coverImageId:"book-4"},{id:"5",title:"Klara and the Sun",author:"Kazuo Ishiguro",coverImageId:"book-5"},{id:"6",title:"Exhalation",author:"Ted Chiang",coverImageId:"book-6"},{id:"7",title:"Ancillary Justice",author:"Ann Leckie",coverImageId:"book-7"},{id:"8",title:"Gideon the Ninth",author:"Tamsyn Muir",coverImageId:"book-8"},{id:"9",title:"A Memory Called Empire",author:"Arkady Martine",coverImageId:"book-9"},{id:"10",title:"Hyperion",author:"Dan Simmons",coverImageId:"book-10"},{id:"11",title:"The Left Hand of Darkness",author:"Ursula K. Le Guin",coverImageId:"book-11"},{id:"12",title:"Children of Time",author:"Adrian Tchaikovsky",coverImageId:"book-12"}];var f=t(243);function x(){let{user:e,isAuthenticated:r,isLoading:t,logout:x}=(0,o.A)(),p=(0,s.useRouter)();if((0,i.useEffect)(()=>{t||r||p.push("/login")},[t,r,p]),t||!r)return(0,a.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row items-start gap-8",children:[(0,a.jsxs)("div",{className:"w-full md:w-1/4 flex flex-col items-center gap-4",children:[(0,a.jsx)(f.E,{className:"h-32 w-32 rounded-full"}),(0,a.jsx)(f.E,{className:"h-8 w-40"}),(0,a.jsx)(f.E,{className:"h-6 w-32"}),(0,a.jsx)(f.E,{className:"h-10 w-full mt-4"})]}),(0,a.jsxs)("div",{className:"w-full md:w-3/4",children:[(0,a.jsx)(f.E,{className:"h-8 w-1/3 mb-6"}),(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:Array.from({length:4}).map((e,r)=>(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)(f.E,{className:"aspect-[2/3] w-full"}),(0,a.jsx)(f.E,{className:"h-5 w-4/5"}),(0,a.jsx)(f.E,{className:"h-4 w-3/5"})]},r))})]})]})});let h=u.slice(0,4);return(0,a.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row items-start gap-8",children:[(0,a.jsx)("aside",{className:"w-full md:w-1/4",children:(0,a.jsx)(d.Zp,{children:(0,a.jsxs)(d.Wu,{className:"p-6 flex flex-col items-center text-center",children:[(0,a.jsxs)(l.Avatar,{className:"h-32 w-32 mb-4",children:[(0,a.jsx)(l.AvatarImage,{src:null==e?void 0:e.avatarUrl,alt:null==e?void 0:e.name}),(0,a.jsx)(l.AvatarFallback,{children:null==e?void 0:e.name.charAt(0)})]}),(0,a.jsx)("h2",{className:"text-2xl font-bold font-headline",children:null==e?void 0:e.name}),(0,a.jsxs)("p",{className:"text-muted-foreground",children:["@",null==e?void 0:e.username]}),(0,a.jsx)(c.Separator,{className:"my-6"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 w-full text-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-2xl font-bold",children:h.length}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Books Read"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-2xl font-bold",children:"12"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Following"})]})]}),(0,a.jsx)(n.$,{onClick:x,className:"w-full mt-6",children:"Logout"})]})})}),(0,a.jsx)("section",{className:"w-full md:w-3/4",children:(0,a.jsxs)(d.Zp,{children:[(0,a.jsx)(d.aR,{children:(0,a.jsx)(d.ZB,{className:"font-headline",children:"Recently Read"})}),(0,a.jsx)(d.Wu,{children:h.length>0?(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:h.map(e=>(0,a.jsx)(m.A,{book:e},e.id))}):(0,a.jsx)("p",{className:"text-muted-foreground",children:"No books read yet."})})]})})]})})}}},e=>{e.O(0,[909,619,977,356,341,441,255,358],()=>e(e.s=3932)),_N_E=e.O()}]);