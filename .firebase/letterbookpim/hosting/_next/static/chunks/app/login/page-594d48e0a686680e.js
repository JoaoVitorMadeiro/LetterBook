(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{17:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>N});var t=r(5155),a=r(2544),n=r(6942),l=r(5653),c=r(3998),i=r(1052),o=r(5142),d=r(6948),m=r(2619),u=r.n(m),x=r(854),h=r(63),j=r(2115),p=r(2033),f=r(5894);let w=l.Ik({email:l.Yj().email({message:"Invalid email address."}),password:l.Yj().min(6,{message:"Password must be at least 6 characters."})});function N(){let{login:e,isAuthenticated:s}=(0,x.A)(),r=(0,h.useRouter)(),{toast:l}=(0,f.dj)(),[m,N]=(0,j.useState)(!1);(0,j.useEffect)(()=>{localStorage.removeItem("token")},[]);let g=(0,a.mN)({resolver:(0,n.u)(w),defaultValues:{email:"",password:""}});async function b(s){N(!0);try{await e(s.email,s.password),l({title:"Login Successful",description:"Welcome back!"}),r.push("/books")}catch(e){l({variant:"destructive",title:"Login Failed",description:e instanceof Error?e.message:"An unknown error occurred."}),N(!1)}}return(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-background",children:(0,t.jsxs)(d.Zp,{className:"w-full max-w-sm",children:[(0,t.jsxs)(d.aR,{children:[(0,t.jsx)(d.ZB,{className:"text-2xl font-headline",children:"Login to LetterBook"}),(0,t.jsx)(d.BT,{children:"Enter your credentials to access your account."})]}),(0,t.jsxs)(d.Wu,{children:[(0,t.jsx)(i.lV,{...g,children:(0,t.jsxs)("form",{onSubmit:g.handleSubmit(b),className:"space-y-4",children:[(0,t.jsx)(i.zB,{control:g.control,name:"email",render:e=>{let{field:s}=e;return(0,t.jsxs)(i.eI,{children:[(0,t.jsx)(i.lR,{children:"Email"}),(0,t.jsx)(i.MJ,{children:(0,t.jsx)(o.p,{placeholder:"name@example.com",...s})}),(0,t.jsx)(i.C5,{})]})}}),(0,t.jsx)(i.zB,{control:g.control,name:"password",render:e=>{let{field:s}=e;return(0,t.jsxs)(i.eI,{children:[(0,t.jsx)(i.lR,{children:"Password"}),(0,t.jsx)(i.MJ,{children:(0,t.jsx)(o.p,{type:"password",placeholder:"••••••••",...s})}),(0,t.jsx)(i.C5,{})]})}}),(0,t.jsxs)(c.$,{type:"submit",className:"w-full",disabled:m,children:[m&&(0,t.jsx)(p.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Login"]})]})}),(0,t.jsxs)("div",{className:"mt-4 text-center text-sm",children:["Don't have an account?"," ",(0,t.jsx)(u(),{href:"/register",className:"underline text-primary",children:"Sign up"})]}),(0,t.jsx)("div",{className:"mt-2 text-center text-sm",children:(0,t.jsx)(u(),{href:"/",className:"underline text-sm text-muted-foreground",children:"Back to Home"})})]})]})})}},3111:(e,s,r)=>{Promise.resolve().then(r.bind(r,17))}},e=>{e.O(0,[909,619,977,310,271,441,255,358],()=>e(e.s=3111)),_N_E=e.O()}]);