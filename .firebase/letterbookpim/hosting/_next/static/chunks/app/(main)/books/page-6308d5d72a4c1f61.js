(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[182],{109:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});let o=(0,r(4294).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},854:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var o=r(2115),a=r(4901);let i=()=>{let e=(0,o.useContext)(a.c);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},3391:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var o=r(5155),a=r(5239),i=r(2619),s=r.n(i),n=r(6948);let l=JSON.parse('{"o":[{"id":"hero-background","description":"A cozy, modern library with warm lighting.","imageUrl":"https://images.unsplash.com/photo-1485322551133-3a4c27a9d925?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NDE5ODJ8MHwxfHNlYXJjaHwxMHx8bGlicmFyeSUyMGJvb2tzfGVufDB8fHx8MTc2NTQzMDIwNHww&ixlib=rb-4.1.0&q=80&w=1080","imageHint":"library books"},{"id":"book-1","description":"Dune Cover","imageUrl":"https://images.unsplash.com/photo-1595124028480-cdfd7be7b85d?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NDE5ODJ8MHwxfHNlYXJjaHwxfHxkZXNlcnQlMjBwbGFuZXR8ZW58MHx8fHwxNzY1NDcwODUyfDA&ixlib=rb-4.1.0&q=80&w=1080","imageHint":"desert planet"},{"id":"book-2","description":"Project Hail Mary Cover","imageUrl":"https://images.unsplash.com/photo-1688413399498-e35ed74b554f?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NDE5ODJ8MHwxfHNlYXJjaHw5fHxzcGFjZXNoaXAlMjBpbnRlcmlvcnxlbnwwfHx8fDE3NjU0NzA4NTJ8MA&ixlib=rb-4.1.0&q=80&w=1080","imageHint":"spaceship interior"},{"id":"book-3","description":"The Three-Body Problem Cover","imageUrl":"https://images.unsplash.com/photo-1567587411727-154d1253a0c3?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NDE5ODJ8MHwxfHNlYXJjaHwyfHxhYnN0cmFjdCUyMHNjaS1maXxlbnwwfHx8fDE3NjU0NzA4NTJ8MA&ixlib=rb-4.1.0&q=80&w=1080","imageHint":"abstract sci-fi"},{"id":"book-4","description":"The Martian Cover","imageUrl":"https://images.unsplash.com/photo-1614935981447-893ce3858657?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NDE5ODJ8MHwxfHNlYXJjaHwxfHxtYXJzJTIwbGFuZHNjYXBlfGVufDB8fHx8MTc2NTM0Mzg0N3ww&ixlib=rb-4.1.0&q=80&w=1080","imageHint":"mars landscape"},{"id":"book-5","description":"Klara and the Sun Cover","imageUrl":"https://images.unsplash.com/photo-1705891333891-c225454768a7?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NDE5ODJ8MHwxfHNlYXJjaHw3fHxzdW4lMjBzZXR0aW5nfGVufDB8fHx8MTc2NTQ3MDg1Mnww&ixlib=rb-4.1.0&q=80&w=1080","imageHint":"sun setting"},{"id":"book-6","description":"Exhalation Cover","imageUrl":"https://images.unsplash.com/photo-1751971309844-cd398ffc540f?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NDE5ODJ8MHwxfHNlYXJjaHwxMHx8Y2xvY2t3b3JrJTIwbWFjaGluZXJ5fGVufDB8fHx8MTc2NTQ3MDg1Mnww&ixlib=rb-4.1.0&q=80&w=1080","imageHint":"clockwork machinery"},{"id":"book-7","description":"Ancillary Justice Cover","imageUrl":"https://images.unsplash.com/photo-1675326570919-946d728e9a25?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NDE5ODJ8MHwxfHNlYXJjaHwyfHxmdXR1cmlzdGljJTIwY2l0eXxlbnwwfHx8fDE3NjU0MzM2MzJ8MA&ixlib=rb-4.1.0&q=80&w=1080","imageHint":"futuristic city"},{"id":"book-8","description":"Gideon the Ninth Cover","imageUrl":"https://images.unsplash.com/photo-1594399430386-913fd5defaa4?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NDE5ODJ8MHwxfHNlYXJjaHw3fHxza3VsbCUyMHN3b3JkfGVufDB8fHx8MTc2NTQ3MDg1Mnww&ixlib=rb-4.1.0&q=80&w=1080","imageHint":"skull sword"},{"id":"book-9","description":"A Memory Called Empire Cover","imageUrl":"https://images.unsplash.com/photo-1564493140194-f9544fae5611?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NDE5ODJ8MHwxfHNlYXJjaHw3fHxzcGFjZSUyMHN0YXRpb258ZW58MHx8fHwxNzY1MzkxMzIyfDA&ixlib=rb-4.1.0&q=80&w=1080","imageHint":"space station"},{"id":"book-10","description":"Hyperion Cover","imageUrl":"https://images.unsplash.com/photo-1641146243141-951ae1e8913f?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NDE5ODJ8MHwxfHNlYXJjaHw1fHxjcnlzdGFsJTIwc3RydWN0dXJlfGVufDB8fHx8MTc2NTQ0MzEzMHww&ixlib=rb-4.1.0&q=80&w=1080","imageHint":"crystal structure"},{"id":"book-11","description":"The Left Hand of Darkness Cover","imageUrl":"https://images.unsplash.com/photo-1712511630932-c75d5f66d9b3?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NDE5ODJ8MHwxfHNlYXJjaHwzfHxpY2UlMjBwbGFuZXR8ZW58MHx8fHwxNzY1NDcwODUyfDA&ixlib=rb-4.1.0&q=80&w=1080","imageHint":"ice planet"},{"id":"book-12","description":"Children of Time Cover","imageUrl":"https://images.unsplash.com/photo-1446582186851-3fe172f6acb9?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NDE5ODJ8MHwxfHNlYXJjaHw4fHxzcGlkZXIlMjB3ZWJ8ZW58MHx8fHwxNzY1NDQyODYwfDA&ixlib=rb-4.1.0&q=80&w=1080","imageHint":"spider web"}]}').o;function c(e){let{book:t}=e,r=l.find(e=>e.id===t.coverImageId),i=t.coverUrl||(null==r?void 0:r.imageUrl);return(0,o.jsx)(s(),{href:"/book/".concat(t.id),className:"group",children:(0,o.jsx)(n.Zp,{className:"overflow-hidden h-full transition-all duration-200 ease-in-out group-hover:scale-105 group-hover:shadow-lg group-hover:shadow-primary/20 border-transparent hover:border-primary/50",children:(0,o.jsxs)(n.Wu,{className:"p-0",children:[(0,o.jsx)("div",{className:"aspect-[2/3] relative",children:i&&(0,o.jsx)(a.default,{src:i,alt:"Cover of ".concat(t.title),fill:!0,className:"object-cover",sizes:"(max-width: 640px) 50vw, (max-width: 768px) 33vw, (max-width: 1024px) 25vw, 20vw","data-ai-hint":null==r?void 0:r.imageHint})}),(0,o.jsxs)("div",{className:"p-2",children:[(0,o.jsx)("h3",{className:"font-semibold text-sm truncate group-hover:text-primary",children:t.title}),(0,o.jsx)("p",{className:"text-xs text-muted-foreground truncate",children:t.author})]})]})})})}},4147:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>f});var o=r(5155),a=r(3391),i=r(5142),s=r(109),n=r(5183),l=r(2115),c=r(854),d=r(63);function u(e){return e.displayName||e.name||"Component"}async function m(){try{return((await n.FH.get("/livros")).data.content||[]).map(e=>({id:e.id,title:e.titulo,author:e.autores&&e.autores.length>0?e.autores.map(e=>e.nome).join(", "):"Unknown Author",coverImageId:"book-cover-1",coverUrl:e.capaUrl}))}catch(e){return console.error("Failed to fetch books",e),[]}}let f=(e=>{let t=t=>{let{isAuthenticated:r,isLoading:a}=(0,c.A)(),i=(0,d.useRouter)();return((0,l.useEffect)(()=>{console.log("[withAuth] Checking auth for ".concat(u(e),": isLoading=").concat(a,", isAuthenticated=").concat(r)),a||r||(console.log("[withAuth] Redirecting to /login from ".concat(u(e))),i.replace("/login"))},[r,a,i]),a||!r)?(0,o.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-background",children:"Loading..."}):(0,o.jsx)(e,{...t})};return t.displayName="WithAuth(".concat(u(e),")"),t})(function(){let[e,t]=(0,l.useState)([]),[r,n]=(0,l.useState)(!0),[c,d]=(0,l.useState)(null);return((0,l.useEffect)(()=>{!async function(){try{let e=await m();t(e)}catch(e){d("Failed to load books. Please try again later."),console.error("Error fetching books:",e)}finally{n(!1)}}()},[]),r)?(0,o.jsx)("div",{className:"container mx-auto px-4 py-8 text-center",children:"Loading books..."}):c?(0,o.jsx)("div",{className:"container mx-auto px-4 py-8 text-center text-red-500",children:c}):(0,o.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,o.jsx)("div",{className:"max-w-2xl mx-auto mb-8",children:(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)(s.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),(0,o.jsx)(i.p,{type:"search",placeholder:"Search for a book...",className:"w-full pl-10"})]})}),e.length>0?(0,o.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-6",children:e.map(e=>(0,o.jsx)(a.A,{book:e},e.id))}):(0,o.jsxs)("div",{className:"text-center py-20",children:[(0,o.jsx)("h2",{className:"text-2xl font-semibold",children:"No Books Found"}),(0,o.jsx)("p",{className:"text-muted-foreground",children:"There are no books in the catalog yet."})]})]})})},4269:(e,t,r)=>{"use strict";r.d(t,{cn:()=>i});var o=r(2821),a=r(5889);function i(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.QP)((0,o.$)(t))}},4294:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var o=r(2115);let a=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let s=(0,o.forwardRef)((e,t)=>{let{color:r="currentColor",size:s=24,strokeWidth:n=2,absoluteStrokeWidth:l,className:c="",children:d,iconNode:u,...m}=e;return(0,o.createElement)("svg",{ref:t,...i,width:s,height:s,stroke:r,strokeWidth:l?24*Number(n)/Number(s):n,className:a("lucide",c),...m},[...u.map(e=>{let[t,r]=e;return(0,o.createElement)(t,r)}),...Array.isArray(d)?d:[d]])}),n=(e,t)=>{let r=(0,o.forwardRef)((r,i)=>{let{className:n,...l}=r;return(0,o.createElement)(s,{ref:i,iconNode:t,className:a("lucide-".concat(e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),n),...l})});return r.displayName="".concat(e),r}},4652:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{default:function(){return l},getImageProps:function(){return n}});let o=r(8140),a=r(2659),i=r(1356),s=o._(r(1124));function n(e){let{props:t}=(0,a.getImgProps)(e,{defaultLoader:s.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return{props:t}}let l=i.Image},4901:(e,t,r)=>{"use strict";r.d(t,{AuthProvider:()=>l,c:()=>n});var o=r(5155),a=r(2115),i=r(63),s=r(5183);let n=(0,a.createContext)(void 0);function l(e){let{children:t}=e,[r,l]=(0,a.useState)(null),[c,d]=(0,a.useState)(!0),u=(0,i.useRouter)();(0,a.useEffect)(()=>{(async()=>{let e=localStorage.getItem("token");if(!e){let t=document.cookie.match(RegExp("(^| )auth_token=([^;]+)"));t&&(e=t[2],localStorage.setItem("token",e))}if(console.log("[AuthProvider] Loading user from token. Token exists:",!!e),e)try{let e=await (0,s.rQ)();console.log("[AuthProvider] User loaded successfully:",e),l(e)}catch(e){console.error("[AuthProvider] Failed to load user",e),localStorage.removeItem("token"),document.cookie="auth_token=; path=/; max-age=0"}else console.log("[AuthProvider] No token found");d(!1)})()},[]);let m=async(e,t)=>{d(!0);try{let{token:r}=await (0,s.Lx)(e,t);localStorage.setItem("token",r),document.cookie="auth_token=".concat(r,"; path=/; max-age=").concat(604800,"; SameSite=Lax");let o=await (0,s.rQ)();l(o)}finally{d(!1)}},f=async(e,t,r,o)=>{d(!0);try{await (0,s.DY)(e,t,r,o)}finally{d(!1)}};return(0,o.jsx)(n.Provider,{value:{user:r,isAuthenticated:!!r,isLoading:c,login:m,register:f,logout:()=>{localStorage.removeItem("token"),document.cookie="auth_token=; path=/; max-age=0",l(null),u.push("/login")}},children:t})}},5142:(e,t,r)=>{"use strict";r.d(t,{p:()=>s});var o=r(5155),a=r(2115),i=r(4269);let s=a.forwardRef((e,t)=>{let{className:r,type:a,...s}=e;return(0,o.jsx)("input",{type:a,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...s})});s.displayName="Input"},5183:(e,t,r)=>{"use strict";r.d(t,{DY:()=>s,FH:()=>o,Lx:()=>a,rQ:()=>i});let o=r(5125).A.create({baseURL:"/api/v1"});o.interceptors.request.use(e=>{let t=localStorage.getItem("token");if(!t&&"undefined"!=typeof document){let e=document.cookie.match(RegExp("(^| )auth_token=([^;]+)"));e&&(t=e[2])}return t&&(e.headers.Authorization="Bearer ".concat(t)),e});let a=async(e,t)=>{try{console.log("[API] Attempting login for:",e);let r=await o.post("/auth/login",{email:e,senha:t});return console.log("[API] Login response status:",r.status),console.log("[API] Login response data:",r.data),r.data}catch(e){var r,a,i,s,n;throw console.error("[API] Login Error Details:",{message:e.message,response:null==(r=e.response)?void 0:r.data,status:null==(a=e.response)?void 0:a.status,headers:null==(i=e.response)?void 0:i.headers}),Error((null==(n=e.response)||null==(s=n.data)?void 0:s.message)||"Invalid email or password")}},i=async()=>{try{let e=(await o.get("/usuarios/me/profile")).data;return{id:e.id,name:e.nome,username:e.email.split("@")[0],email:e.email,avatarUrl:e.fotoUrl||"https://placehold.co/100x100?text=User"}}catch(o){var e,t,r;throw console.error("[API] Fetch Profile Error:",{status:null==(e=o.response)?void 0:e.status,data:null==(t=o.response)?void 0:t.data,headers:null==(r=o.response)?void 0:r.headers,message:o.message}),Error("Failed to fetch user profile")}},s=async(e,t,r,a)=>{try{return(await o.post("/auth/register",{name:e,username:t,email:r,password:a})).data}catch(e){var i,s;throw Error((null==(s=e.response)||null==(i=s.data)?void 0:i.message)||"Registration failed")}}},5239:(e,t,r)=>{"use strict";r.d(t,{default:()=>a.a});var o=r(4652),a=r.n(o)},6289:(e,t,r)=>{Promise.resolve().then(r.bind(r,4147))},6948:(e,t,r)=>{"use strict";r.d(t,{BT:()=>c,Wu:()=>d,ZB:()=>l,Zp:()=>s,aR:()=>n});var o=r(5155),a=r(2115),i=r(4269);let s=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,o.jsx)("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground",r),...a})});s.displayName="Card";let n=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,o.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",r),...a})});n.displayName="CardHeader";let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,o.jsx)("h3",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",r),...a})});l.displayName="CardTitle";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,o.jsx)("p",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",r),...a})});c.displayName="CardDescription";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,o.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",r),...a})});d.displayName="CardContent",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,o.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",r),...a})}).displayName="CardFooter"}},e=>{e.O(0,[909,619,977,356,441,255,358],()=>e(e.s=6289)),_N_E=e.O()}]);